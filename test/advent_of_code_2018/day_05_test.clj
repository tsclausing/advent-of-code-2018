(ns advent-of-code-2018.day-05-test
  (:require [clojure.test :refer :all]
            [advent-of-code-2018.day-05 :refer :all]))

(deftest example-react-polymer
  (testing "With example input."
    (let [reaction (react-polymer "dabAcCaCBAcCcaDA")]
      (is (= reaction "dabCBAcaDA"))
      (is (= 10 (count reaction))))))

(deftest example-shortest-polymer
  (testing "With example input."
    (let [reaction (shortest-polymer "dabAcCaCBAcCcaDA")]
      (is (= reaction "daDA"))
      (is (= 4 (count reaction))))))

;-- PUZZLE SOLUTIONS --;

(def full-input (slurp "test/fixtures/day_05_test.txt"))

(deftest full-react-polymer
  (testing "With full input."
    (let [reaction (react-polymer (read-input full-input))]
      (is (= reaction "emGXnDsdXRJkwEFeyUatawpumyqHJDnVBkJPmwkfZjRWtvhvdwsPUHxiFomnJMYWpZRteSyLqdbiSPstaefJtbCNPFPYxIqmHMgPxbEYFXqyrNeSkTzSJXYQkUCHbetpAvMcfzIUrSOcPnEBKbvjLWVjyPWkknemsBqFokBRljxHOltxanFPKrwnVSOyeSBXjQISpTjCqnYVnRnTdOdvceCOzbPeuRMymQDITclzuiDyhjyePToQkHgsKPxTWStWqXssjXNXsBsldMBWYmpyLHwxblkjnOwlAzCYcvoaFRvZrwoUpRgmnFnMFmoFrPmhuAcgcdQFVMoAprkFELDnvNSZsHfmlgywyWbArrzbxHZrLJdNfAOktpGvdRpfWRGFkctJYQPUkFIIuCOTdrdZVIvCfdTYOzuVXQRJvoqTQFUEBgBTNvjfOecylmHnKCoFvWHaMXIAKOGSwbFonkdoxwMSbIlVRdrEWhUIVnPBcwYxGfYiKuWbboqvSmYkmBAzIQwOVrxYQxrduMZcIszRTrfvOGwyqzfWOXeaeDldVaNbgUatQLPhTSIMUWqUOJnKfsmKtDqJHxGCphQMcGytuMHsTHIISfgPsmzmRaPNRbzdogEkqpLFMFvRYdNPnIHJADxVJpqWKXCPcGMXsixtNSFsAkqBRzFFUQkJNKYHnkToZxOFACavMXlGATRylkfQDlFqHSGJXOzyHBILTiRjbPAfpgwnzdCDpGDcBoLmaghrnHmbcajDcnDihUkGGNSIJXzRAoFVpKTGrOxVouBgiADtADfiCtIrMtIsOVNEiaKGMQDDyPNgjqeykGufTjtxapijQGIULGRuFDLtRlOOpiyuTpqAKiwfHBjMbRCWPkgraUmsOdQTLUpqsebhqCaiSbPcMWnKmOehxGHkrknVzooAjnVEAVXJYawCDEvMZAMURemtruiBaoAEypTSbjBJRWWawtDrwslVnmHtRxAOJpWZwZYGoUmOxBnhSJOIHQxyoSMMxtiSMzBnyBZAeIAJmoEkqJeAJpaPjbspbdqhRkRTlcXQabPAzPZgrKJhUmrvijupBvhdpLjSQBTDmgaNRZiMXDNfDGojlDqSrIdXCDvQQzqEgEBIUxxPNbzhaPlFanoCRQWiGylpTlPtunxnkSAzpgUrVLTkvFiOWeNMdVckSUswwMONePuEJMfGKPMwAsGCWpFhRlBRAczDDeJTrGXbvpMjofdYpLUpAhchSCfKnonplXHHpwaTMVYmAYEPZVrpfqhfpDVJdeYZnyPSYFvzWPLNNBqtepqrNvTGKKAWgUrHFkoxENyIacNdPBcKJLSCemIDwnygPSrUhBphbminSiAtwoHLCpMnJEUrNtQMutuaNrhXdZoNWISNtATIzCgRhtVFgABXGpgckBUkqWuknRkwceXOdXRNQbpFNFpsshFRdFROrAdgklChfLRDJcVqXuHuJyzbqhfiiHmswOfDIfylAPQtqBewCujaSTmjYYCGjwipifaYsTjVUZXGAwkeNRSnnihMNyyrTFCovyssbElXGOfVtkbwrGojfoaFYiqhexexiEgLCxzlxMQamwBccRuJSXnsnJoQnllOPNIEHcjMGlGLRHyCisnAxEsMXUdKqeTZDGHuhUoewTciRcrnLGKHtkOZLIRLLDJsgRsuEQooPgXiQYQJZcAHzXVDkRkmIjmHLvLrlQbHaJTiAxYIgythLCPAnxpsanFucwEBsVODMQpaegWPkVzzTnSufbznTLiDREISdJXasDboLueXgQPfeXfIEzcbeZLwDOIveOyrwFRKTiAvXYpSRxHvwgeFTFyaJBrpdcxVUzrlEkwCbcbaKLPqZWOuYcdrZaFmgRtaEsclJsbNwuxrFhECiyhcvIxkeryhIwyrWYGWhBkoNDaUNbEVMKQDBahJHHfRfOzQBhIBApjNrpLtLMUjvFJcETOueACxBMFUlxjVUNvLTzEYPwTMBMOXjIbcVycNgrIeaNCqRHIoqnoaSxsKnsXZGjBntiDJdyzfXdTAPJnhKGszAjodcNDNbHTFvvkflhRntCeSmnPgHyirvlXouINKInSaeytZZdOzxulEObCqXbuqBXorALxojvhQygmWVdvrQZZITvMJqklRXJUSBFYsxhCYUziDxeycbIKefObiUhXnerjwYUoDZIbglsyzFUAlIGsqyUNFBrFEZdYbRELknfvFvlQoErVyxJEiOlqkGhebGALttYlWFVcHWFNDPRBJVohXflafTwdCSBhmIxMKLfnHFmKPWeNvyaBNPAWoSMlylJAcqSxAGUvhvctQmkOxTEOWFuwEHzSLJCzPGPMYGKQRcoQRIpVjeTCNplqOfTwogKNdfxhiCIBZIRxFiqTleNwJPRLCBJQyTfzQBLOgXiuOQCVGAuweRAspajLqyNkmcbhhlZsPbchrHndJXcFLIudPsVkCBYfltfkWRofDIAWVNZlRHuDnuXZiOCjPlugKbVwrwXjLdljdkksVQhxCpdSwsyzhSLaRETkgyXPluQZsAOqluqXHYKmjEqPMDOxHJKhbIOjWULeyFxoHPTojzYOwcbsfmNttrXCdfzLenLJiVNKSvLCDusQgyjoLHxqfdTNrMYuqeqDGzVdfdLZcNYCPjYajebnuaZPOHuOSjKoGAIrsPDarCFIZKerabYaLNgurqDGbCVquavfWPLALruqCdlNaQoMufSdUoWvDssAZGRyWPbbwRnvGfcKjKZLZyCpnlkRyKUJGmHvzmpXAUGKfupIFsfhansHtgpiBoVXnyJcUfysqJqazfMCKGACwzGWxNKotQfJXYZJwGXFnUPUscpTYqncUOcjxjPktsoiKjZdNUlTFaCisKFcYYQGGLJiuwLAncRmKLHFytfGIykRDkiudKZCHpWcfRzkZPwbyswMXtjbEAzWfofoTjsLmVlIjolRtBUlACBeoFNfUeRLnqnxBJTIrwTaCofUCAcHsVylXbeDYmAAlmShvdsmUYYhTLNSSikQYfWKUPtblElWokYjIkAkwYIzcbAnpsYXipgxdqdZYbtcMlsNoHkDmRkMpGkgqLsumOkMeVMQwdbidTSSdfXsvfNiAJAQxCerJMGrvQkqgXLmbmRWYNPsdBeGyiofBpJoZRPSlxbrvAvyZBfeXUfAynjTlaMDmVFJOJDKWGFNxzyBaoiChUJyoiSHGBDiKBeFvudVPAFwFRFDXGZdFdnDkbNpyMnRnfUHUOfwAwgbIWxIgtUmKQiwnmTpXZeFcimwBmBLVDDFysKmwODJCdltQRXlXefeQAsLWFDNLqsLpiWSyFSpUqrPlMFPDmGpiYixxSpKGGKPCosfUESJlBLAndSSRmXfEJLpDRhTTGQIJYDJwgmadsjirPxCrIWNxjzaKhutrKrNawaKhIXpAVOPGmuWILMzrCnHEBQjSgaKsrHmJlMwBEhOSNlrpWbtPkcDIrHuYskbQLOUsWroxnkLinwjTDkrIeoECnHkqJsiMNSKFBEYJDENQLxPqeXmqTyCzhttlPFmYZiNZSPGUgBJTSLZnAfKEfthqwwwHRTfezNqjkNAZDQYhIeHAwuvpqworcaXnPXMImwBTHCLxROVLQSnOySdbIOnjjatRWPYMLqrEfwYvKHrZsUbGKzIKJduAIQVpqGxrbDESRtxKTNoAoJKyBKIBheCjeMpgVVkYBQxdObCuOphPxTZAkZNDOwlWRyxliJSkSTfYKSFXdyiCTPnGwblxnJfrhaxFSSGmpsdTZpewXsimUQevyaeTaumOgsZeJPgTRDkufAELyUNagaKOlEAZpXiaDrdReDtVNORclmUYPQeKXsqmSnDuPtNHAPzuyajnUboTqnFHQKavcFuDuqeYUUWTkLfdvqegXUQXLDnCdrCJoxnEcqkPYcZrgbpdizbuJBzVkRyDXoaItDzXRXFOUBepwyisKBPbCQDbWKLcOyjspKmlABBlZOiDFaEyrJyQkhICavGBuxpOaXvZbvSRdjmWjsAXqYiifdXSbHtjKMOipeAPKirUSkayZnbjTfJAIhGKvNPmjurnOeARxjeNxbwHYpcKBsQtAkBhZVyJEKKTAKOZjsyprKfIehXVeDnXPUPisGZqjjYfxKMNTLjxxuAzdSFHixBfzTUfScmUiBwqWitDNAXRDDuzlQxJtEvzJRXmkQGvRdFakEMwEOwdfSxoxGUImjMpVuEbaEiZCuRRjemvDgFSCWLeSZaaMtlulZCsGXCKIjDNAOnKEOBavNWcPFMkkyCrZjZGIdHIlgQVroFzclBqJZyHITjVjnRuzcXLSkZAcQZHlOjQREPZAgKXBfOGlPNaFiAfaBQmhfdrHTFCbtupRmPPoQMvzjIYaFsPmNaXRGLPHTefEsCWlBhEAXZhFkXPKXuyQJlJxLExvuNRSGFujbxfSDrsRlnuzFiemnXPjnfStImAZAMqVQUpCaWLrBWvzJkPjxIVpWOZnuWvLvrvtrtBCvnwbvtjtxzuwykZdafCupZblujaFTOwaHCogVUcLZTdrAZKVwmtNxTGGvriiRuzJfldszNtCPMyWqmEjXYXOUDDXVGhloNUtbywVYHFVKwzPfjIgNrXnvzqPwpsqUxsxVxGrCWEpbyUvaNwSoAlgvhAlzaCYKBGoeQbxtzNuWufRZZLIEGiCsfIvaSKxZeUeBtdJWvxPeydPxCnbNOkxpmmrBnSdNJQwKroPuCbZqLwDssnqMMrMlUPfatqFJwgsCdJcetEdqRSrhdkIeXRbgvTiFchybnkwjgnHqjWpzJUlyuLNOAnBlemKSEIQxfYfxNPsQCGJCYIFehbARlZtzblcInBekivgsUVTvEVdVxvkPOirHlrLrasOUJJTbsoZLhloSCMYeogwVPIJQdkEolikxzPbsJfSCwKfhnbtGbPUFulZHMCoTTxaPHPbSRTYPzpQXdkvmhUWWXXiZUbPMQAHSYKvccmolnCDilxLAgCwXBEKnfsZSiXpmkttYMJhqVqHzjtVreAeWyiYnrlCdPaRNRxDSMXnaaczibjWZTyhKzgCxdknpxfoHzAIbdoXpbWzQByVrPyZaRwflbewrdEzLJYJZRurxUMDMutlZThnAfqzzrqFjuDQiedXuGKcYSaptqhzxYlBnDUegfGbggvkVovaFRiTkVPeqvUthETQifJhWaEuledgJIqSzEIRUcNTplWVdwlcLnPRMlfTebKfcGJzGRBewyFRfolblotxZyMBVoIxBQnSzSLkbqROcFWtKPTKULcuqtbweeIWqerMBIkiwfRUsUjibTsvRlKqjXHGWBlGbWMujgtnUBknlXvOJxtXgMYbGkXASdZdhqvevljLENxCLmOnnuMhdFCbPxqJtEQwhyQunGqRDTQdpKizhoZtVMAEZqqycTQTZWPPSfHBcGGdremHGRixGezVldkiBXGOCikYcNGASFsagnCyKIcogxbIKDLvZEgXIrghMERDggCbhFsppwztqtCYQQzeamvTzOHZIkPDqtdrQgNUqYHWqeTjQXpBcfDHmUNNoMlcXnelJLVEVQHDzDsaxKgBymGxTXjoVxLNKbuNTGJUmwBgLbwghxJQkLrVStBIJuSurFWIKibmREQwiEEWBTQUCluktpkTwfCorQBKlsZsNqbXiOvbmYzXTOLBLOFrfYWEbrgZjgCFkBEtFLmrpNlCLWDvwLPtnCurieZsQijGDELUeAwHjFIqteHTuVQEpvKtIrfAVOvKVGGBgFGEudNbLyXZHQTPAsyCkgUxDEIqdUJfQRZZQFaNHtzLTUmdmuXRUrzjyjlZeDRWEBLFWrAzYpRvYbqZwBPxODBiaZhOFXPNKDXcGZkHYtzwJBIZCAANxmsdXrnrApDcLRNyIYwEaERvTJZhQvQHjmyTTKMPxIszSFNkebxWcGalXLIdcNLOMCCVkyshaqmpBuzIxxwwuHMVKDxqPZpytrsBphpAXttOcmhzLUfupBgTBNHFkWcsFjSBpZXKILOeKDqjipvWGOEymcsOLHlzOSBtjjuoSARlRLhRIopKVXvDveVtvuSGVIKEbNiCLBZTzLraBHEfiycjgcqSpnXFyFXqieskMELbNaonlUYLujZPwJQhNGJWKNBYHCfItVGBrxEiKDHRsrQDeTECjDcSGWjfQTAFpuLmRmmQNSSdWlQzBcUpORkWqjnDsNbRMMPXKonBNcXpDYEpXVwjDTbEuEzXksAViFScIgeilzzrFUwUnZTXBqEOgbkycAZLaHVGLaOsWnAVuYBPewcRgXvXSXuQSPWpQZVNxRnGiJFpZWkvfhyvWYBTunOLHgvxdduoxyxJeMQwYmpcTnZSDLFjZUrIIRVggtXnTMWvkzaRDtzlCuvGOchAWotfAJULBzPUcFADzKYWUZXTJTVBWNVcbTRTVRVlVwUNzowPviXJpKjZVwbRlwAcPuqvQmazaMiTsFNJpxNMEIfZUNLrSRdsFXBJUfgsrnUVXelXjLjqYUxkpxKfHzxaeHbLwcSeFEthplgrxAnMpSfAyiJZVmqOppMrPUTBcfthRDFHMqbAFaIfAnpLgoFbxkGazperqJoLhzqCazKslxCZUrNJvJtihYzjQbLCZfORvqGLihDigzJzRcYKKmfpCwnVAboekNoandJikcxgSczLULTmAAzsElwcsfGdVMEJrrUczIeABeUvPmJMiugXOXsFDWoeWmeKAfDrVgqKMxrjZVeTjXqLZUddrxandTIwQWbIuMCsFutZFbXIhfsDZaUXXJltnmkXFyJJQzgSIpupxNdEvxHEiFkRPYSJzokatkkejYvzHbKaTqSbkCPyhWBXnEJXraEoNRUJMpnVkgHiajFtJBNzYAKsuRIkpaEPIomkJThBsxDFIIyQxaSJwMJDrsVBzVxAoPXUbgVAciHKqYjRYeAfdIozLbbaLMkPSJYoClkwBdqcBpbkSIYWPEbuofxrxZdTiAOxdYrKvZbjUBZIDPBGRzCypKQCeNXOjcRDcNdlxquxGEQVDFlKtwuuyEQUdUfCVAkqhfNQtOBuNJAYUZpahnTpUdNsMQSxkEqpyuMLCronvTdErDRdAIxPzaeLokAGAnuYleaFUKdrtGpjEzSGoMUAtEAYVEquMISxWEPztDSPMgssfXAHRFjNXLBWgNptcIYDxfskyFtsKsjILXYrwLWodnzKaztXpHPoUcBoDXqbyKvvGPmEJcEHbikbYkjOaOntkXTrsedBRXgQPvqiaUDjkiZkgBuSzRhkVyWFeRQlmypwrTAJJNoiBDsYoNsuqlvorXlchtbWMimxpNxACROWQPVUWahEiHyqdzanKJQnZEFtrhWWWQHTFekFaNzlstjbGugpsznIzyMfpLTTHZcYtQMxEQpXlqnedjyebfksnmISjQKhNceOEiRKdtJWNIlKNXORwSuolqBKSyUhRidCKpTBwPRLnsoHbWmLjMhRSkAGsJqbehNcRZmliwUMgpovaPxiHkAWAnRkRTUHkAZJXnwiRcXpRIJSDAMGWjdyjiqgttHrdPljeFxMrssDNalbLjseuFSOcpkggkPsXXIyIPgMdpfmLpRQuPsfYswIPlSQlndfwlSaqEFExLxrqTLDcjdoWMkSYfddvlbMbWMICfEzxPtMNWIqkMuTGiXwiBGWaWFouhuFNrNmYPnBKdNDfDzgxdfrfWfapvDUVfEbkIdbghsIOYjuHcIOAbYZXnfgwkdjojfvMdmALtJNYaFuxEFbzYVaVRBXLsprzOjPbFOIYgEbDSpnywrMBMlxGQKqVRgmjREcXqajaInFVSxFDsstDIBDWqmvEmKoMUSlQGKgPmKrMdKhOnSLmCTByzDQDXGPIxySPNaBCZiyWKaKiJyKOwLeLBTpukwFyqKIssnltHyyuMSDVHsMLaaMydEBxLYvShCacuFOcAtWRitjbXNQNlrEuFnfOEbcaLubTrLOJiLvMlSJtOFOFwZaeBJTxmWSYBWpzKZrFCwPhczkDUIKdrKYigFTYfhlkMrCNalWUIjlggqyyCfkSIcAftLunDzJkIOSTKpJXJCouCNQytPCSupuNfxgWjzyxjFqTOknXwgZWcagkcmFZAQjQSYFuCjYNxvObIPGThSNAHFSfiPUFkguaxPMZVhMgjukYrKLNPcYzlzkJkCFgVNrWBBpwYrgzaSSdVwOuDsFUmOqAnLDcQURlalpwFVAUQvcBgdQRUGnlAyBAREkzifcRAdpSRiagOkJsoUhopzAUNBEJAyJpcynCzlDFDvZgdQEQUymRntDFQXhlOJYGqSUdclVsknvIjlNElZFDcxRTTnMFSBCWoyZJOtphOXfYEluwJoiBHkjhXodmpQeJMkyhxQULQoaSzqULpxYGKterAlsHZYSWsDPcXHqvSKKDJLDlJxWRWvBkGULpJcoIzxUNdUhrLznvwaidFOrwKFTLFybcKvSpDUilfCxjDNhRHCBpSzLHHBCMKnYQlJAPSarEWUagvcqoUIxGolbqZFtYqjbclrpjWnELtQIfXrizbicIHXFDnkGOWtFoQLPnctEJvPirqOCrqkgympgpZcjlsZheWUfwoetXoKMqTCVHVugaXsQCajLYLmsOwapnbAYVnEwpkMfhNFlkmXiMHbscDWtFALFxHOvjbrpdnfwhCvfwLyTTlagBEHgKQLoIejXYvReOqLVfVFNKlerByDzefRbfnuYQSgiLaufZYSLGBizdOuyWJRENxHuIBoFEkiBCYEXdIZuycHXSyfbsujxrLKQjmVtizzqRVDvwMGYqHVJOXlaROxbQUBxQcBoeLUXZoDzzTYEAsNikniUOxLVRIYhGpNMsEcTNrHLFKVVfthBndnCDOJaZSgkHNjpatDxFZYDjdITNbJgzxSNkSXsAONQOihrQcnAEiRGnCYvCBiJxombmtWpyeZtlVnuvJXLufmbXcaEUoteCjfVJumlTlPRnJPabiHbqZoFrFhhjHAbdqkmveBnuAdnOKbHwgywRYWiHYREKXiVCHYIceHfRXUWnBSjLCSeATrGMfAzRDCyUowzQplkABCBcWKeLRZuvXCDPRbjAYftfEGWVhXrsPyxVaItkrfWRYoEViodWlzEBCZeiFxEFpqGxEUlOBdSAxjDsierdIltNZBFUsNtZZvKpwGEAPqmdovSbeWCUfNASPXNapclHTYGiyXaItjAhBqLRlVlhMJiMKrKdvxZhaCzjqyqIxGpOOqeUSrGSjdllrilzoKThkglNRCrICtWEOuHUhgdztEQkDuxmSeXaNSIcYhrlgLgmJCheinpoLLNqOjNSNxsjUrCCbWMAqmXLZXclGeIXEXEHQIyfAOFJOgRWBKTvFogxLeBSSYVOcftRYYnmHINNsrnEKWagxzuvJtSyAFIPIWJgcyyJMtsAJUcUWEbQTqpaLYFidFoWSMhIIFHQBZYjUhUxQvCjdrlFHcLKGDaRorfDrfHSSPfnfPBqnrxDoxECWKrNKUwQKubKCGPgxbaGfvTHrGcZitaTnsiwnOzDxHRnAUTUmqTnRuejNmPclhOWTaIsNIMBHPbHuRspGYNWdiMEcsljkCbpDnCAiYneXOKfhRuGwakkgtVnRQPETQbnnlpwZVfyspYNzyEDjvdPFHQFPRvzpeyaMyvmtAWPhhxLPNONkFcsHCHaPulPyDFOJmPVBxgRtjEddZCarbLrHfPwcgSaWmpkgFmjeUpEnomWWSusKCvDmnEwoIfVKtlvRuGPZasKNXNUTpLtPLYgIwqrcONAfLpAHZBnpXXuibeGeQZqqVdcxDiRsQdLJOgdFndxmIzrnAGMdtbqsJlPDHVbPUJIVRMuHjkRGzpZapBAqxCLtrKrHQDBPSBJpAPjaEjQKeOMjaiEazbYNbZmsITXmmsOYXqhiojsHNbXoMuOgyzWzwPjoaXrThMNvLSWRdTWAwwrjbJBstPYeaOAbIURTMErumazmVedcWAyjxvaevNJaOOZvNKRKhgXHEoMkNwmCpBsIAcQHBESQPultqDoSMuARGKpwcrBmJbhFWIkaQPtUYIPlfLooLrTldfUrgluigqJIPAXTJtFUgKYEQJGnpYddqmgkAIenvoSiTmRiTcIFdaTdaIGbUOvXoRgtkPvfOarZxjisnggKuHIdNCdJACBMhNRHGAMlObCdgPdcDZNWGPFapBJrItlibhYZoxjgshQfLdqFKLYrtagLxmVAcafoXzOtKNhyknjKquffZrbQKaSfsnTXISxmgCpcxkwQPjvXdajhiNpnDyrVfmflPQKeGODZBrnpArMZMSpGFsiihtShmUTYgCmqHPcgXhjQdTkMSFkNjouQwumistHplqTAuGBnAvDLdEAExowFZQYWgoVFRtrZSiCzmUDRXqyXRvoWqiZabMKyMsVQOBBwUkIyFgXyWCbpNviuHweRDrvLiBsmWXODKNOfBWsgokaixmAhwVfOckNhMLYCEoFJVntbGbeufqtQOVjrqxvUZoytDFcVivzDRDtocUiifKupqyjTCKfgrwFPrDVgPTKoaFnDjlRzhXBZRRaBwYWYGLMFhSzsnVNdlefKRPaOmvfqDCGCaUHMpRfOMfmNfNMGrPuOWRzVrfAOVCycZaLWoNJKLBXWhlYPMywbmDLSbSxnxJSSxQwTswtXpkSGhKqOtpEYJHYdIUZLCtidqMYmrUEpBZoVDoDtNrNvyNQcJtPsiqJxbsEYosvNWRkpfNAXTLohXJLrbKOfQbSMENKKwpYJvwlJVBkbeNpCosRuiZFCmVaPTEBhcuKqyxjsZtKsEnRYQxfyeBXpGmhMQiXypfpncBTjFEATSpsIBDQlYsETrzPwymjNMOfIXhupSWDVHVTwrJzFKWMpjKbvNdjhQYMUPWATAuYEfeWKjrxDSdNxgME"))
      (is (= 10878 (count reaction))))))

(deftest full-shortest-polymer
  (testing "With full input."
    (let [reaction (shortest-polymer (read-input full-input))]
      (is (= reaction "emGXnDsdXRJkwyUatawpumyqHJDnVBkJPmwkZjRWtvhvdwsPUHxiomnJMYWpZRteSyLqdbiSPstaeJtbCNPPYxIqmHMgPxbEYXqyrNeSkTzSJXYQkUCHbetpAvMczIUrSOcPnEBKbvjLWVjyPWkknemsBqokBRljxHOltxanPKrwnVSOyeSBXjQISpTjCqnYVnRnTdOdvceCOzbPeuRMymQDITclzuiDyhjyePToQkHgsKPxTWStWqXssjXNXsBsldMBWYmpyLHwxblkjnOwlAzCYcvoaRvZrwoUpRgmnnorPmhuAcgcdQVMoAprkELDnvNSZsHmlgywyWbArrzbxHZrLJdNAOktpGvdRpWRGkctJYQPUkIIuCOTdrdZVIvCdTYOzuVXQRJvoqTQUEBgBTNvjOecylmHnKCovWHaMXIAKOGSwbonkdoxwMSbIlVRdrEWhUIVnPBcwYxGYiKuWbboqvSmYkmBAzIQwOVrxYQxrduMZcIszRTrvOGwyqzWOXeaeDldVaNbgUatQLPhTSIMUWqUOJnKsmKtDqJHxGCphQMcGytuMHsTHIISgPsmzmRaPNRbzdogEkqpLMvRYdNPnIHJADxVJpqWKXCPcGMXsixtNAkqBRzUQkJNKYHnkToZxOACavMXlGATRylkQDlqHSGJXOzyHBILTiRjbPApgwnzdCDpGDcBoLmaghrnHmbcajDcnDihUkGGNSIJXzRAoVpKTGrOxVouBgiADtADiCtIrMtIsOVNEiaKGMQDDyPNgjqeykGuTjtxapijQGIULGRuDLtRlOOpiyuTpqAKiwHBjMbRCWPkgraUmsOdQTLUpqsebhqCaiSbPcMWnKmOehxGHkrknVzooAjnVEAVXJYawCDEvMZAMURemtruiBaoAEypTSbjBJRWWawtDrwslVnmHtRxAOJpWZwZYGoUmOxBnhSJOIHQxyoSMMxtiSMzBnyBZAeIAJmoEkqJeAJpaPjbspbdqhRkRTlcXQabPAzPZgrKJhUmrvijupBvhdpLjSQBTDmgaNRZiMXDNDGojlDqSrIdXCDvQQzqEgEBIUxxPNbzhaPlanoCRQWiGylpTlPtunxnkSAzpgUrVLTkviOWeNMdVckSUswwMONePuEJMGKPMwAsGCWphRlBRAczDDeJTrGXbvpMjodYpLUpAhchSCKnonplXHHpwaTMVYmAYEPZVrpqhpDVJdeYZnyPSYvzWPLNNBqtepqrNvTGKKAWgUrHkoxENyIacNdPBcKJLSCemIDwnygPSrUhBphbminSiAtwoHLCpMnJEUrNtQMutuaNrhXdZoNWISNtATIzCgRhtVgABXGpgckBUkqWuknRkwceXOdXRNQbpNpsshRdROrAdgklChLRDJcVqXuHuJyzbqhiiHmswODIylAPQtqBewCujaSTmjYYCGjwipiaYsTjVUZXGAwkeNRSnnihMNyyrTCovyssbElXGOVtkbwrGojoaYiqhexexiEgLCxzlxMQamwBccRuJSXnsnJoQnllOPNIEHcjMGlGLRHyCisnAxEsMXUdKqeTZDGHuhUoewTciRcrnLGKHtkOZLIRLLDJsgRsuEQooPgXiQYQJZcAHzXVDkRkmIjmHLvLrlQbHaJTiAxYIgythLCPAnxpsanucwEBsVODMQpaegWPkVzzTnSubznTLiDREISdJXasDboLueXgQPeXIEzcbeZLwDOIveOyrwRKTiAvXYpSRxHvwgeTyaJBrpdcxVUzrlEkwCbcbaKLPqZWOuYcdrZamgRtaEsclJsbNwuxrhECiyhcvIxkeryhIwyrWYGWhBkoNDaUNbEVMKQDBahJHHROzQBhIBApjNrpLtLMUjvJcETOueACxBMUlxjVUNvLTzEYPwTMBMOXjIbcVycNgrIeaNCqRHIoqnoaSxsKnsXZGjBntiDJdyzXdTAPJnhKGszAjodcNDNbHTvvklhRntCeSmnPgHyirvlXouINKInSaeytZZdOzxulEObCqXbuqBXorALxojvhQygmWVdvrQZZITvMJqklRXJUSBYsxhCYUziDxeycbIKeObiUhXnerjwYUoDZIbglsyzUAlIGsqyUNBrEZdYbRELknvvlQoErVyxJEiOlqkGhebGALttYlWVcHWNDPRBJVohXlaTwdCSBhmIxMKLnHmKPWeNvyaBNPAWoSMlylJAcqSxAGUvhvctQmkOxTEOWuwEHzSLJCzPGPMYGKQRcoQRIpVjeTCNplqOTwogKNdxhiCIBZIRxiqTleNwJPRLCBJQyTzQBLOgXiuOQCVGAuweRAspajLqyNkmcbhhlZsPbchrHndJXcLIudPsVkCBYltkWRoDIAWVNZlRHuDnuXZiOCjPlugKbVwrwXjLdljdkksVQhxCpdSwsyzhSLaRETkgyXPluQZsAOqluqXHYKmjEqPMDOxHJKhbIOjWULeyxoHPTojzYOwcbsmNttrXCdzLenLJiVNKSvLCDusQgyjoLHxqdTNrMYuqeqDGzVddLZcNYCPjYajebnuaZPOHuOSjKoGAIrsPDarCIZKerabYaLNgurqDGbCVquavWPLALruqCdlNaQoMuSdUoWvDssAZGRyWPbbwRnvGcKjKZLZyCpnlkRyKUJGmHvzmpXAUGKupIshansHtgpiBoVXnyJcUysqJqazMCKGACwzGWxNKotQJXYZJwGXnUPUscpTYqncUOcjxjPktsoiKjZdNUlTaCisKcYYQGGLJiuwLAncRmKLHytGIykRDkiudKZCHpWcRzkZPwbyswMXtjbEAzWooTjsLmVlIjolRtBUlACBeoNUeRLnqnxBJTIrwTaCoUCAcHsVylXbeDYmAAlmShvdsmUYYhTLNSSikQYWKUPtblElWokYjIkAkwYIzcbAnpsYXipgxdqdZYbtcMlsNoHkDmRkMpGkgqLsumOkMeVMQwdbidTSSdXsvNiAJAQxCerJMGrvQkqgXLmbmRWYNPsdBeGyioBpJoZRPSlxbrvAvyZBeXUAynjTlaMDmVJOJDKWGNxzyBaoiChUJyoiSHGBDiKBevudVPAwRDXGZddnDkbNpyMnRnUHUOwAwgbIWxIgtUmKQiwnmTpXZecimwBmBLVDDysKmwODJCdltQRXlXeeQAsLWDNLqsLpiWSySpUqrPlMPDmGpiYixxSpKGGKPCosUESJlBLAndSSRmXEJLpDRhTTGQIJYDJwgmadsjirPxCrIWNxjzaKhutrKrNawaKhIXpAVOPGmuWILMzrCnHEBQjSgaKsrHmJlMwBEhOSNlrpWbtPkcDIrHuYskbQLOUsWroxnkLinwjTDkrIeoECnHkqJsiMNSKBEYJDENQLxPqeXmqTyCzhttlPmYZiNZSPGUgBJTSLZnAKEthqwwwHRTezNqjkNAZDQYhIeHAwuvpqworcaXnPXMImwBTHCLxROVLQuqlvorXlchtbWMimxpNxACROWQPVUWahEiHyqdzanKJQnZEtrhWWWQHTekaNzlstjbGugpsznIzyMpLTTHZcYtQMxEQpXlqnedjyebksnmISjQKhNceOEiRKdtJWNIlKNXORwSuolqBKSyUhRidCKpTBwPRLnsoHbWmLjMhRSkAGsJqbehNcRZmliwUMgpovaPxiHkAWAnRkRTUHkAZJXnwiRcXpRIJSDAMGWjdyjiqgttHrdPljexMrssDNalbLjseuSOcpkggkPsXXIyIPgMdpmLpRQuPsYswIPlSQlndwlSaqEExLxrqTLDcjdoWMkSYddvlbMbWMICEzxPtMNWIqkMuTGiXwiBGWaWouhuNrNmYPnBKdNDDzgxdrWapvDUVEbkIdbghsIOYjuHcIOAbYZXngwkdjojvMdmALtJNYauxEbzYVaVRBXLsprzOjPbOIYgEbDSpnywrMBMlxGQKqVRgmjREcXqajaInVSxDsstDIBDWqmvEmKoMUSlQGKgPmKrMdKhOnSLmCTByzDQDXGPIxySPNaBCZiyWKaKiJyKOwLeLBTpukwyqKIssnltHyyuMSDVHsMLaaMydEBxLYvShCacuOcAtWRitjbXNQNlrEunOEbcaLubTrLOJiLvMlSJtOOwZaeBJTxmWSYBWpzKZrCwPhczkDUIKdrKYigTYhlkMrCNalWUIjlggqyyCkSIcAtLunDzJkIOSTKpJXJCouCNQytPCSupuNxgWjzyxjqTOknXwgZWcagkcmZAQjQSYuCjYNxvObIPGThSNAHSiPUkguaxPMZVhMgjukYrKLNPcYzlzkJkCgVNrWBBpwYrgzaSSdVwOuDsUmOqAnLDcQURlalpwVAUQvcBgdQRUGnlAyBAREkzicRAdpSRiagOkJsoUhopzAUNBEJAyJpcynCzlDDvZgdQEQUymRntDQXhlOJYGqSUdclVsknvIjlNElZDcxRTTnMSBCWoyZJOtphOXYEluwJoiBHkjhXodmpQeJMkyhxQULQoaSzqULpxYGKterAlsHZYSWsDPcXHqvSKKDJLDlJxWRWvBkGULpJcoIzxUNdUhrLznvwaidOrwKTLybcKvSpDUilCxjDNhRHCBpSzLHHBCMKnYQlJAPSarEWUagvcqoUIxGolbqZtYqjbclrpjWnELtQIXrizbicIHXDnkGOWtoQLPnctEJvPirqOCrqkgympgpZcjlsZheWUwoetXoKMqTCVHVugaXsQCajLYLmsOwapnbAYVnEwpkMhNlkmXiMHbscDWtALxHOvjbrpdnwhCvwLyTTlagBEHgKQLoIejXYvReOqLVVNKlerByDzeRbnuYQSgiLauZYSLGBizdOuyWJRENxHuIBoEkiBCYEXdIZuycHXSybsujxrLKQjmVtizzqRVDvwMGYqHVJOXlaROxbQUBxQcBoeLUXZoDzzTYEAsNikniUOxLVRIYhGpNMsEcTNrHLKVVthBndnCDOJaZSgkHNjpatDxZYDjdITNbJgzxSNkSXsAONQOihrQcnAEiRGnCYvCBiJxombmtWpyeZtlVnuvJXLumbXcaEUoteCjVJumlTlPRnJPabiHbqZorhhjHAbdqkmveBnuAdnOKbHwgywRYWiHYREKXiVCHYIceHRXUWnBSjLCSeATrGMAzRDCyUowzQplkABCBcWKeLRZuvXCDPRbjAYtEGWVhXrsPyxVaItkrWRYoEViodWlzEBCZeixEpqGxEUlOBdSAxjDsierdIltNZBUsNtZZvKpwGEAPqmdovSbeWCUNASPXNapclHTYGiyXaItjAhBqLRlVlhMJiMKrKdvxZhaCzjqyqIxGpOOqeUSrGSjdllrilzoKThkglNRCrICtWEOuHUhgdztEQkDuxmSeXaNSIcYhrlgLgmJCheinpoLLNqOjNSNxsjUrCCbWMAqmXLZXclGeIXEXEHQIyAOJOgRWBKTvogxLeBSSYVOctRYYnmHINNsrnEKWagxzuvJtSyAIPIWJgcyyJMtsAJUcUWEbQTqpaLYidoWSMhIIHQBZYjUhUxQvCjdrlHcLKGDaRorDrHSSPnPBqnrxDoxECWKrNKUwQKubKCGPgxbaGvTHrGcZitaTnsiwnOzDxHRnAUTUmqTnRuejNmPclhOWTaIsNIMBHPbHuRspGYNWdiMEcsljkCbpDnCAiYneXOKhRuGwakkgtVnRQPETQbnnlpwZVyspYNzyEDjvdPHQPRvzpeyaMyvmtAWPhhxLPNONkcsHCHaPulPyDOJmPVBxgRtjEddZCarbLrHPwcgSaWmpkgmjeUpEnomWWSusKCvDmnEwoIVKtlvRuGPZasKNXNUTpLtPLYgIwqrcONALpAHZBnpXXuibeGeQZqqVdcxDiRsQdLJOgdndxmIzrnAGMdtbqsJlPDHVbPUJIVRMuHjkRGzpZapBAqxCLtrKrHQDBPSBJpAPjaEjQKeOMjaiEazbYNbZmsITXmmsOYXqhiojsHNbXoMuOgyzWzwPjoaXrThMNvLSWRdTWAwwrjbJBstPYeaOAbIURTMErumazmVedcWAyjxvaevNJaOOZvNKRKhgXHEoMkNwmCpBsIAcQHBESQPultqDoSMuARGKpwcrBmJbhWIkaQPtUYIPooLrTldUrgluigqJIPAXTJtUgKYEQJGnpYddqmgkAIenvoSiTmRiTcIdaTdaIGbUOvXoRgtkPvOarZxjisnggKuHIdNCdJACBMhNRHGAMlObCdgPdcDZNWGPapBJrItlibhYZoxjgshQLdqKLYrtagLxmVAcaoXzOtKNhyknjKquZrbQKanTXISxmgCpcxkwQPjvXdajhiNpnDyrVmlPQKeGODZBrnpArMZMSpGsiihtShmUTYgCmqHPcgXhjQdTkMSkNjouQwumistHplqTAuGBnAvDLdEAExowZQYWgoVRtrZSiCzmUDRXqyXRvoWqiZabMKyMsVQOBBwUkIygXyWCbpNviuHweRDrvLiBsmWXODKNOBWsgokaixmAhwVOckNhMLYCEoJVntbGbeuqtQOVjrqxvUZoytDcVivzDRDtocUiiKupqyjTCKgrwPrDVgPTKoanDjlRzhXBZRRaBwYWYGLMhSzsnVNdleKRPaOmvqDCGCaUHMpRONNMGrPuOWRzVrAOVCycZaLWoNJKLBXWhlYPMywbmDLSbSxnxJSSxQwTswtXpkSGhKqOtpEYJHYdIUZLCtidqMYmrUEpBZoVDoDtNrNvyNQcJtPsiqJxbsEYosvNWRkpNAXTLohXJLrbKOQbSMENKKwpYJvwlJVBkbeNpCosRuiZCmVaPTEBhcuKqyxjsZtKsEnRYQxyeBXpGmhMQiXyppncBTjEATSpsIBDQlYsETrzPwymjNMOIXhupSWDVHVTwrJzKWMpjKbvNdjhQYMUPWATAuYWKjrxDSdNxgME"))
      (is (= 6874 (count reaction))))))
